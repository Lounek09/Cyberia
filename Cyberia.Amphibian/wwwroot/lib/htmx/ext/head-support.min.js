!function(){htmx.version&&!htmx.version.startsWith("1.")&&console.warn("WARNING: You are using an htmx 1 extension with htmx "+htmx.version+".  It is recommended that you move to the version of this extension found on https://extensions.htmx.org");var p=null;function n(e,t){if(e&&-1<e.indexOf("<head")){const l=document.createElement("html");e=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"").match(/(<head(\s[^>]*>|>)([\s\S]*?)<\/head>)/im);if(e){var n=[],o=[],r=[],d=[],e=(l.innerHTML=e,l.querySelector("head")),a=document.head;if(null!=e){var h=new Map;for(const g of e.children)h.set(g.outerHTML,g);var i=p.getAttributeValue(e,"hx-head")||t;for(const x of a.children){var m=h.has(x.outerHTML),s="re-eval"===x.getAttribute("hx-head"),u="true"===p.getAttributeValue(x,"hx-preserve");m||u?s?o.push(x):(h.delete(x.outerHTML),r.push(x)):"append"===i?s&&(o.push(x),d.push(x)):!1!==p.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:x})&&o.push(x)}d.push(...h.values());for(const v of d){v;var c=document.createRange().createContextualFragment(v.outerHTML);!1!==p.triggerEvent(document.body,"htmx:addingHeadElement",{headElement:c})&&(a.appendChild(c),n.push(c))}for(const f of o)!1!==p.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:f})&&a.removeChild(f);p.triggerEvent(document.body,"htmx:afterHeadMerge",{added:n,kept:r,removed:o})}}}}htmx.defineExtension("head-support",{init:function(e){p=e,htmx.on("htmx:afterSwap",function(e){var t=e.detail.xhr.response;p.triggerEvent(document.body,"htmx:beforeHeadMerge",e.detail)&&n(t,e.detail.boosted?"merge":"append")}),htmx.on("htmx:historyRestore",function(e){p.triggerEvent(document.body,"htmx:beforeHeadMerge",e.detail)&&(e.detail.cacheMiss?n(e.detail.serverResponse,"merge"):n(e.detail.item.head,"merge"))}),htmx.on("htmx:historyItemCreated",function(e){e.detail.item.head=document.head.outerHTML})}})}();